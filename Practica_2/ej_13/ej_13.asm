TIMER EQU 10H
PIC EQU 20H
EOI EQU 20H
IMR EQU 21H
N_CLK EQU 10

ORG 40
IP_CLK DW RUT_CLK

ORG 1000H
UNI0 DB 30H
UNI1 DB 30H
UNI2 DB 30H
UNI3 DB 30H
FIN DB ?

ORG 3000H
RUT_CLK: PUSH AX
 INC UNI3
 CMP UNI3, 3AH
 JNZ RESET
 INT 7 
 MOV UNI3, 30H
 INC UNI2
 CMP UNI2, 36H
 JNZ RESET
 MOV UNI2, 30H
 INC UNI1
 CMP UNI1, 3AH
 JNZ RESET
 MOV UNI1, 30H
 INC UNI0
 CMP UNI0, 36H
 JNZ RESET
 MOV UNI0, 30H
RESET: 
 MOV AL, 0
 OUT TIMER, AL
 MOV AL, EOI
 OUT PIC, AL
 POP AX
 IRET

ORG 2000H
CLI
 MOV AL, 0FDH
 OUT IMR, AL
 MOV AL, N_CLK
 OUT PIC+5, AL
 MOV AL, 1
 OUT TIMER+1, AL
 MOV AL, 0
 OUT TIMER, AL
 MOV BX, OFFSET UNI0
 MOV AL, OFFSET FIN - OFFSET UNI0
STI
LAZO: JMP LAZO
END